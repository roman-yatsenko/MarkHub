{% extends "base.html" %}

{% block title %}
  {% if user.is_authenticated %}
    {{ repo }} - 
  {% endif %}
{% endblock %}

{% block content %}
<div class="container">
  {% include "components/branch_path_form.html" %}
  <div class="list-group">
    {% if parent_path %}
    <li class="list-group-item list-group-item-action">
      {% if parent_path != "." %}
        <a href ="{% url 'repo' repo branch parent_path %}" class="text-decoration-none">..</a>
      {% else %}
        <a href ="{% url 'repo' repo %}" class="text-decoration-none">..</a>
      {% endif %}
    </li>
    {% endif %}
    {% for content in repo_contents %}
    <li class="list-group-item list-group-item-action">
      {% if content.type == "dir"%}
        📁 <a href ="{% url 'repo' repo branch content.path %}" class="text-decoration-none">
      {% else %}
        📄 <a href ="{% url 'file' repo branch content.path %}" class="text-decoration-none">
      {% endif %}
              {{ content.name }}
            </a>
    </li>
    {% endfor %}
  </div>
  <p class="mt-3">
    <a 
      class="btn btn-outline-primary" 
      {% if path %}
        href="{% url 'new-file' repo path %}"
      {% else %}
        href="{% url 'new-file' repo %}"
      {% endif %}>
      New file
    </a>
  </p>
  <p><a href="{{ html_url }}" target="_blank">Open in the GitHub</a></p>
</div>
{% endblock %}
